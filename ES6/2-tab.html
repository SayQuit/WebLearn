<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .top {
            width: 900px;
            height: 100px;
            border: 1px solid black;
            border-bottom: 0;
            position: relative;
        }

        .main {
            width: 900px;
            height: 400px;
            border: 1px solid black;

        }

        .add {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            left: 85%;
            width: 50px;
            height: 50px;
            border: 1px solid black;
            text-align: center;
            line-height: 50px;
            cursor: pointer;
        }

        .nav {
            width: 100px;
            height: 100px;
            /* border: 1px solid black; */
            float: left;
            position: relative;
            text-align: center;
            line-height: 100px;
            cursor: pointer;

        }

        .nav .del {
            position: absolute;
            width: 20px;
            height: 20px;
            left: 100%;
            transform: translateX(-100%);
            border: 1px solid black;
            text-align: center;
            line-height: 20px;
        }

        .cont {
            display: none;
            width: 900px;
            height: 400px;
            padding-top: 50px;
            cursor: pointer;

        }

        .top .currNav {
            border: 1px solid black;

        }

        .main .currCont {
            display: block;

        }

        input {
            width: 50px;
            height: 30px;
        }

        .inp {
            
            display: none;
        }

        .currentinp {
            display: inline-block;
        }

        p{ 
            display: inline-block;
            height: 20px;
            line-height: 20px;
        }
        .currentp{ 
            display: none;
        }



        .currentp1{ 
            display: none;
        }
        .inp1 {
            
            display: none;
        }

        .currentinp1 {
            display: inline-block;
        }


    </style>
</head>

<body style="margin:100px">
    <div class="top">
        <div class="add">+</div>
    </div>
    <div class="main">
    </div>

    <p></p>
</body>
<script>
    function getChildText(node) {
        var text = "";
        for (var child = node.firstChild; !!child; child = child.nextSibling) {
            if (child.nodeType === 3) {
                text += child.nodeValue;
            }
        }
        return text;
    }
    var num = 0
    var tops = document.querySelector('.top');
    var main = document.querySelector('.main');
    var add = document.querySelector('.add');
    // var nav=document.querySelectorAll('.nav');

    add.addEventListener('click', function () {
        var nav = document.createElement('div')
        nav.classList.add('nav')
        nav.innerHTML = '<div class="del">×</div><p>测试' + num+'</p>'
        this.parentNode.appendChild(nav)

        var cont = document.createElement('cont')
        cont.classList.add('cont')
        cont.innerHTML = '<p>测试' + num+'</p>'
        main.appendChild(cont)

        var inp = document.createElement('input')
        inp.classList.add('inp')
        nav.appendChild(inp)

        var inp1 = document.createElement('input')
        inp1.classList.add('inp1')
        cont.appendChild(inp1)





        nav.addEventListener('click', function () {
            var n = document.querySelectorAll('.nav');
            for (var i = 0; i < n.length; i++) {
                n[i].classList.remove('currNav')
            }
            var c = document.querySelectorAll('.cont');
            for (var i = 0; i < n.length; i++) {
                c[i].classList.remove('currCont')
            }
            this.classList.add('currNav')
            cont.classList.add('currCont')
        })


        nav.ondblclick = function () {
            var n = document.querySelectorAll('.inp');
            for (var i = 0; i < n.length; i++) {
                n[i].classList.remove('currentinp')
            }

            var k=this.querySelector('p').innerHTML
            this.querySelector('p').classList.add('currentp')
            
            inp.setAttribute("value", k)
            inp.classList.add('currentinp')

            inp.focus()
            inp.select()
            
            
        }
        inp.addEventListener('blur',function(){
            var k=this.value
            this.parentNode.querySelector('p').innerHTML=k
            this.parentNode.querySelector('p').classList.remove('currentp')
            this.classList.add('inp')
            this.classList.remove('currentinp')
            
        })






        cont.ondblclick = function () {
            var n = document.querySelectorAll('.inp1');
            for (var i = 0; i < n.length; i++) {
                n[i].classList.remove('currentinp1')
            }

            var k=this.querySelector('p').innerHTML
            this.querySelector('p').classList.add('currentp1')
            console.log(this.querySelector('p'));
            
            inp1.setAttribute("value", k)
            inp1.classList.add('currentinp1')

            inp1.focus()
            inp1.select()


            
            
            
        }
        inp1.addEventListener('blur',function(){
            var k=this.value
            this.parentNode.querySelector('p').innerHTML=k
            this.parentNode.querySelector('p').classList.remove('currentp1')
            
            this.classList.add('inp1')
            this.classList.remove('currentinp1')
            
            
            console.log(this.parentNode.querySelector('p'));
            console.log(this);
            
        })

        



        var del = nav.querySelector('.del');
        del.addEventListener('click', function () {
            this.parentNode.remove();
            cont.remove()
        })






        num++

        // console.log(nav[0]);
    })







</script>

</html>